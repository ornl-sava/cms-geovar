(function(a){function b(a,b){return typeof a=="function"?a.call(b):a}function d(b,d){this.$element=a(b),this.options=d,this.enabled=!0,this.fixTitle(),c(this)}var c=function(){function d(){for(var a=0;a<c.length;){var b=c[a];b.options.gcInterval===0||b.$element.closest("body").length===0?(b.hoverState="out",b.hide(),c.splice(a,1)):a++}}function e(){b=setTimeout(function(){d(),e()},a)}var a,b=null,c=[];return function(d){if(d.options.gcInterval===0)return;b&&d.options.gcInterval<a&&(clearTimeout(b),b=null,a=d.options.gcInterval),c.push(d),b||e()}}();d.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](c),d[0].className="tipsy",d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var e=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});if(typeof this.$element[0].nearestViewportElement=="object"){var f=this.$element[0],g=f.getBoundingClientRect();e.width=g.width,e.height=g.height}var h=d[0].offsetWidth,i=d[0].offsetHeight,j=b(this.options.gravity,this.$element[0]),k;switch(j.charAt(0)){case"n":k={top:e.top+e.height+this.options.offset,left:e.left+e.width/2-h/2};break;case"s":k={top:e.top-i-this.options.offset,left:e.left+e.width/2-h/2};break;case"e":k={top:e.top+e.height/2-i/2,left:e.left-h-this.options.offset};break;case"w":k={top:e.top+e.height/2-i/2,left:e.left+e.width+this.options.offset}}j.length==2&&(j.charAt(1)=="w"?k.left=e.left+e.width/2-15:k.left=e.left+e.width/2-h+15),d.css(k).addClass("tipsy-"+j),d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+j.charAt(0),this.options.className&&d.addClass(b(this.options.className,this.$element[0])),this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity});var l=this,m=function(a){return function(){l.$tip.stop(),l.tipHovered=a,a||(l.options.delayOut===0&&l.options.trigger!="manual"?l.hide():setTimeout(function(){l.hoverState=="out"&&l.hide()},l.options.delayOut))}};d.hover(m(!0),m(!1))}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("original-title")!="string")&&a.attr("original-title",a.attr("title")||"").removeAttr("title"),typeof a.context.nearestViewportElement=="object"&&a.children("title").length&&a.append("<original-title>"+(a.children("title").text()||"")+"</original-title>").children("title").remove()},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();if(typeof c.title=="string"){var d=c.title=="title"?"original-title":c.title;b.children(d).length?a=b.children(d).html():(a=b.attr(d),typeof a=="undefined"&&(a=""))}else typeof c.title=="function"&&(a=c.title.call(b[0]));return a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(b){function c(c){var e=a.data(c,"tipsy");return e||(e=new d(c,a.fn.tipsy.elementOptions(c,b)),a.data(c,"tipsy",e)),e}function e(){var a=c(this);a.hoverState="in",b.delayIn===0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},b.delayIn))}function f(){var a=c(this);a.hoverState="out";if(b.delayOut===0)a.hide();else{var d=function(){(!a.tipHovered||!b.hoverlock)&&a.hoverState=="out"&&a.hide()};setTimeout(d,b.delayOut)}}if(b===!0)return this.data("tipsy");if(typeof b=="string")return a(this).each(function(c,d){a(d).data("tipsy")&&(tipsy=a(d).data("tipsy"),tipsy[b]())}),this;b=a.extend({},a.fn.tipsy.defaults,b),b.hoverlock&&b.delayOut===0&&(b.delayOut=100),b.live||this.each(function(){c(this)});if(b.trigger!="manual"){var g=b.live?"live":"bind",h=b.trigger=="hover"?"mouseenter":"focus",i=b.trigger=="hover"?"mouseleave":"blur";this[g](h,e)[g](i,f)}return this},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gcInterval:0,gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",hoverlock:!1},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(b,c){return function(){var d={ns:c[0],ew:c.length>1?c[1]:!1},e=a(document).scrollTop()+b,f=a(document).scrollLeft()+b,g=a(this);return g.offset().top<e&&(d.ns="n"),g.offset().left<f&&(d.ew="w"),a(window).width()+a(document).scrollLeft()-g.offset().left<b&&(d.ew="e"),a(window).height()+a(document).scrollTop()-g.offset().top<b&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}}})(jQuery);var requirejs,require,define;(function(global){function isFunction(a){return ostring.call(a)==="[object Function]"}function isArray(a){return ostring.call(a)==="[object Array]"}function each(a,b){if(a){var c;for(c=0;c<a.length;c+=1)if(a[c]&&b(a[c],c,a))break}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1;c-=1)if(a[c]&&b(a[c],c,a))break}}function hasProp(a,b){return hasOwn.call(a,b)}function eachProp(a,b){var c;for(c in a)if(a.hasOwnProperty(c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){if(c||!hasProp(a,e))d&&typeof b!="string"?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeContextModuleFunc(a,b,c){return function(){var d=aps.call(arguments,0),e;return c&&isFunction(e=d[d.length-1])&&(e.__requireJsBuild=!0),d.push(b),a.apply(null,d)}}function addRequireMethods(a,b,c){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(d){var e=d[1]||d[0];a[d[0]]=b?makeContextModuleFunc(b[e],c):function(){var a=contexts[defContextName];return a[e].apply(a,arguments)}})}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function p(a){var b,c;for(b=0;a[b];b+=1){c=a[b];if(c===".")a.splice(b,1),b-=1;else if(c===".."){if(b===1&&(a[2]===".."||a[0]===".."))break;b>0&&(a.splice(b-1,2),b-=2)}}}function q(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,q=b&&b.split("/"),r=q,s=g.map,t=s&&s["*"];a&&a.charAt(0)==="."&&(b?(g.pkgs[b]?r=q=[b]:r=q.slice(0,q.length-1),a=r.concat(a.split("/")),p(a),e=g.pkgs[d=a[0]],a=a.join("/"),e&&a===d+"/"+e.main&&(a=d)):a.indexOf("./")===0&&(a=a.substring(2)));if(c&&(q||t)&&s){h=a.split("/");for(i=h.length;i>0;i-=1){k=h.slice(0,i).join("/");if(q)for(j=q.length;j>0;j-=1){f=s[q.slice(0,j).join("/")];if(f){f=f[k];if(f){l=f,m=i;break}}}if(l)break;!n&&t&&t[k]&&(n=t[k],o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function r(a){isBrowser&&each(scripts(),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===d.contextName)return b.parentNode.removeChild(b),!0})}function s(a){var b=g.paths[a];if(b&&isArray(b)&&b.length>1)return r(a),b.shift(),d.undef(a),d.require([a]),!0}function t(a,b,c,e){var f,g,h,i=a?a.indexOf("!"):-1,j=null,l=b?b.name:null,o=a,p=!0,r="";return a||(p=!1,a="_@r"+(m+=1)),i!==-1&&(j=a.substring(0,i),a=a.substring(i+1,a.length)),j&&(j=q(j,l,e),g=k[j]),a&&(j?g&&g.normalize?r=g.normalize(a,function(a){return q(a,l,e)}):r=q(a,l,e):(r=q(a,l,e),f=d.nameToUrl(r))),h=j&&!g&&!c?"_unnormalized"+(n+=1):"",{prefix:j,name:r,parentMap:b,unnormalized:!!h,url:f,originalName:o,isDefine:p,id:(j?j+"!"+r:r)+h}}function u(a){var b=a.id,c=h[b];return c||(c=h[b]=new d.Module(a)),c}function v(a,b,c){var d=a.id,e=h[d];hasProp(k,d)&&(!e||e.defineEmitComplete)?b==="defined"&&c(k[d]):u(a).on(b,c)}function w(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=h[b];c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function x(){globalDefQueue.length&&(apsp.apply(j,[j.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function y(a,b,c){var e=a&&a.map,f=makeContextModuleFunc(c||d.require,e,b);return addRequireMethods(f,d,e),f.isBrowser=isBrowser,f}function z(a){delete h[a],each(o,function(b,c){if(b.map.id===a)return o.splice(c,1),b.defined||(d.waitCount-=1),!0})}function A(a,b){var c=a.map.id,d=a.depMaps,e;if(!a.inited)return;return b[c]?a:(b[c]=!0,each(d,function(a){var d=a.id,f=h[d];if(!f)return;return!f.inited||!f.enabled?(e=null,delete b[c],!0):e=A(f,mixin({},b))}),e)}function B(a,b,c){var d=a.map.id,f=a.depMaps;if(!a.inited||!a.map.isDefine)return;return b[d]?k[d]:(b[d]=a,each(f,function(f){var g=f.id,i=h[g],j;if(e[g])return;if(i){if(!i.inited||!i.enabled){c[d]=!0;return}j=B(i,b,c),c[g]||a.defineDepById(g,j)}}),a.check(!0),k[d])}function C(a){a.check()}function D(){var a,c,e,i,j=g.waitSeconds*1e3,k=j&&d.startTime+j<(new Date).getTime(),l=[],m=!1,n=!0;if(b)return;b=!0,eachProp(h,function(b){a=b.map,c=a.id;if(!b.enabled)return;if(!b.error)if(!b.inited&&k)s(c)?(i=!0,m=!0):(l.push(c),r(c));else if(!b.inited&&b.fetched&&a.isDefine){m=!0;if(!a.prefix)return n=!1}});if(k&&l.length)return e=makeError("timeout","Load timeout for modules: "+l,null,l),e.contextName=d.contextName,w(e);n&&(each(o,function(a){if(a.defined)return;var b=A(a,{}),c={};b&&(B(b,c,{}),eachProp(c,C))}),eachProp(h,C)),(!k||i)&&m&&(isBrowser||isWebWorker)&&!f&&(f=setTimeout(function(){f=0,D()},50)),b=!1}function E(a){u(t(a[0],null,!0)).init(a[1],a[2])}function F(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function G(a){var b=a.currentTarget||a.srcElement;return F(b,d.onScriptLoad,"load","onreadystatechange"),F(b,d.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}var b,c,d,e,f,g={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},h={},i={},j=[],k={},l={},m=1,n=1,o=[];return e={require:function(a){return y(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=k[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return g.config&&g.config[a.map.id]||{}},exports:k[a.map.id]}}},c=function(a){this.events=i[a.id]||{},this.map=a,this.shim=g.shim[a.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},c.prototype={init:function(a,b,c,d){d=d||{};if(this.inited)return;this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.depMaps.rjsSkipMap=a.rjsSkipMap,this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check()},defineDepById:function(a,b){var c;return each(this.depMaps,function(b,d){if(b.id===a)return c=d,!0}),this.defineDep(c,b)},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(this.fetched)return;this.fetched=!0,d.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();y(this,!0)(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()}))},load:function(){var a=this.map.url;l[a]||(l[a]=!0,d.load(this.map.id,a))},check:function(a){if(!this.enabled||this.enabling)return;var b,c,e=this.map.id,f=this.depExports,g=this.exports,i=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(i)){if(this.events.error)try{g=d.execCb(e,i,f,g)}catch(j){b=j}else g=d.execCb(e,i,f,g);this.map.isDefine&&(c=this.module,c&&c.exports!==undefined&&c.exports!==this.exports?g=c.exports:g===undefined&&this.usingExports&&(g=this.exports));if(b)return b.requireMap=this.map,b.requireModules=[this.map.id],b.requireType="define",w(this.error=b)}else g=i;this.exports=g,this.map.isDefine&&!this.ignore&&(k[e]=g,req.onResourceLoad&&req.onResourceLoad(d,this.map,this.depMaps)),delete h[e],this.defined=!0,d.waitCount-=1,d.waitCount===0&&(o=[])}this.defining=!1,a||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var a=this.map,b=a.id,c=t(a.prefix,null,!1,!0);v(c,"defined",bind(this,function(c){var e,f,i,j=this.map.name,k=this.map.parentMap?this.map.parentMap.name:null;if(this.map.unnormalized){c.normalize&&(j=c.normalize(j,function(a){return q(a,k,!0)})||""),f=t(a.prefix+"!"+j,this.map.parentMap,!1,!0),v(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),i=h[f.id],i&&(this.events.error&&i.on("error",bind(this,function(a){this.emit("error",a)})),i.enable());return}e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(h,function(a){a.map.id.indexOf(b+"_unnormalized")===0&&z(a.map.id)}),w(a)}),e.fromText=function(a,b){var c=useInteractive;c&&(useInteractive=!1),u(t(a)),req.exec(b),c&&(useInteractive=!0),d.completeLoad(a)},c.load(a.name,y(a.parentMap,!0,function(a,b,c){return a.rjsSkipMap=!0,d.require(a,b,c)}),e,g)})),d.enable(c,this),this.pluginMaps[c.id]=c},enable:function(){this.enabled=!0,this.waitPushed||(o.push(this),d.waitCount+=1,this.waitPushed=!0),this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,f,g;if(typeof a=="string"){a=t(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap),this.depMaps[b]=a,g=e[a.id];if(g){this.depExports[b]=g(this);return}this.depCount+=1,v(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&v(a,"error",this.errback)}c=a.id,f=h[c],!e[c]&&f&&!f.enabled&&d.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=h[a.id];b&&!b.enabled&&d.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),a==="error"&&delete this.events[a]}},d={config:g,contextName:a,registry:h,defined:k,urlFetched:l,waitCount:0,defQueue:j,Module:c,makeModuleMap:t,configure:function(a){a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/");var b=g.pkgs,c=g.shim,e=g.paths,f=g.map;mixin(g,a,!0),g.paths=mixin(e,a.paths,!0),a.map&&(g.map=mixin(f||{},a.map,!0,!0)),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),a.exports&&!a.exports.__buildReady&&(a.exports=d.makeShimExports(a.exports)),c[b]=a}),g.shim=c),a.packages&&(each(a.packages,function(a){var c;a=typeof a=="string"?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),g.pkgs=b),eachProp(h,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=t(b))}),(a.deps||a.callback)&&d.require(a.deps||[],a.callback)},makeShimExports:function(a){var b;return typeof a=="string"?(b=function(){return getGlobal(a)},b.exports=a,b):function(){return a.apply(global,arguments)}},requireDefined:function(a,b){return hasProp(k,t(a,b,!1,!0).id)},requireSpecified:function(a,b){return a=t(a,b,!1,!0).id,hasProp(k,a)||hasProp(h,a)},require:function(b,c,e,f){var g,h,i,l,m;if(typeof b=="string")return isFunction(c)?w(makeError("requireargs","Invalid require call"),e):req.get?req.get(d,b,c):(g=b,f=c,i=t(g,f,!1,!0),h=i.id,hasProp(k,h)?k[h]:w(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+a)));e&&!isFunction(e)&&(f=e,e=undefined),c&&!isFunction(c)&&(f=c,c=undefined),x();while(j.length){m=j.shift();if(m[0]===null)return w(makeError("mismatch","Mismatched anonymous define() module: "+m[m.length-1]));E(m)}return l=u(t(null,f)),l.init(b,c,e,{enabled:!0}),D(),d.require},undef:function(a){x();var b=t(a,null,!0),c=h[a];delete k[a],delete l[b.url],delete i[a],c&&(c.events.defined&&(i[a]=c.events),z(a))},enable:function(a,b){var c=h[a.id];c&&u(a).enable()},completeLoad:function(a){var b,c,d,e=g.shim[a]||{},f=e.exports&&e.exports.exports;x();while(j.length){c=j.shift();if(c[0]===null){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);E(c)}d=h[a];if(!b&&!k[a]&&d&&!d.inited){if(g.enforceDefine&&(!f||!getGlobal(f))){if(s(a))return;return w(makeError("nodefine","No define call for "+a,null,[a]))}E([a,e.deps||[],e.exports])}D()},toUrl:function(a,b){var c=a.lastIndexOf("."),e=null;return c!==-1&&(e=a.substring(c,a.length),a=a.substring(0,c)),d.nameToUrl(q(a,b&&b.id,!0),e)},nameToUrl:function(a,b){var c,d,e,f,h,i,j,k,l;if(req.jsExtRegExp.test(a))k=a+(b||"");else{c=g.paths,d=g.pkgs,h=a.split("/");for(i=h.length;i>0;i-=1){j=h.slice(0,i).join("/"),e=d[j],l=c[j];if(l){isArray(l)&&(l=l[0]),h.splice(0,i,l);break}if(e){a===e.name?f=e.location+"/"+e.main:f=e.location,h.splice(0,i,f);break}}k=h.join("/"),k+=b||(/\?/.test(k)?"":".js"),k=(k.charAt(0)==="/"||k.match(/^[\w\+\.\-]+:/)?"":g.baseUrl)+k}return g.urlArgs?k+((k.indexOf("?")===-1?"?":"&")+g.urlArgs):k},load:function(a,b){req.load(d,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if(a.type==="load"||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=G(a);d.completeLoad(b.id)}},onScriptError:function(a){var b=G(a);if(!s(b.id))return w(makeError("scripterror","Script error",a,[b.id]))}}}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(a){if(a.readyState==="interactive")return interactiveScript=a}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.0.5",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return!isArray(a)&&typeof a!="string"&&(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=contexts[g],e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(a){throw a},req.load=function(a,b,c){var d=a&&a.config||{},e;if(isBrowser)return e=d.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),e.type=d.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e.setAttribute("data-requirecontext",a.contextName),e.setAttribute("data-requiremodule",b),e.attachEvent&&!(e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,e.attachEvent("onreadystatechange",a.onScriptLoad)):(e.addEventListener("load",a.onScriptLoad,!1),e.addEventListener("error",a.onScriptError,!1)),e.src=c,currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;isWebWorker&&(importScripts(c),a.completeLoad(b))},isBrowser&&eachReverse(scripts(),function(a){head||(head=a.parentNode),dataMain=a.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(a,b,c){var d,e;typeof a!="string"&&(c=b,b=a,a=null),isArray(b)||(c=b,b=[]),!b.length&&isFunction(c)&&c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(c.length===1?["require"]:["require","exports","module"]).concat(b)),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),function(){(function(a,b){function c(a){if(a&&typeof a=="object"&&a.__wrapped__)return a;if(!(this instanceof c))return new c(a);this.__wrapped__=a}function d(a,b,c){b||(b=0);var d=a.length,e=d-b>=(c||bb);if(e)for(var f={},c=b-1;++c<d;){var g=a[c]+"";(vb.call(f,g)?f[g]:f[g]=[]).push(a[c])}return function(c){if(e){var d=c+"";return vb.call(f,d)&&-1<P(f[d],c)}return-1<P(a,c,b)}}function e(a){return a.charCodeAt(0)}function f(a,b){var c=a.b,d=b.b,a=a.a,b=b.a;if(a!==b){if(a>b||typeof a=="undefined")return 1;if(a<b||typeof b=="undefined")return-1}return c<d?-1:1}function g(a,b,c){function d(){var h=arguments,i=f?this:b;return e||(a=b[g]),c.length&&(h=h.length?c.concat(n(h)):c),this instanceof d?(m.prototype=a.prototype,i=new m,m.prototype=null,h=a.apply(i,h),x(h)?h:i):a.apply(i,h)}var e=w(a),f=!c,g=b;return f&&(c=b),e||(b=a),d}function h(a,b,c){return a?typeof a!="function"?function(b){return b[a]}:typeof b!="undefined"?c?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}:a:U}function i(){for(var a={b:"",c:"",e:Tb,f:Sb,g:"",h:Wb,i:Zb,j:qb,k:"",l:!0},b,c=0;b=arguments[c];c++)for(var d in b)a[d]=b[d];b=a.a,a.d=/^[^,]+/.exec(b)[0],c=Function,d="var i,l="+a.d+",t="+a.d+";if(!"+a.d+")return t;"+a.k+";",a.b?(d+="var m=l.length;i=-1;if(typeof m=='number'){",a.i&&(d+="if(k(l)){l=l.split('')}"),d+="while(++i<m){"+a.b+"}}else {"):a.h&&(d+="var m=l.length;i=-1;if(m&&j(l)){while(++i<m){i+='';"+a.g+"}}else {"),a.e||(d+="var u=typeof l=='function'&&s.call(l,'prototype');");if(a.f&&a.l)d+="var q=-1,r=p[typeof l]?n(l):[],m=r.length;while(++q<m){i=r[q];",a.e||(d+="if(!(u&&i=='prototype')){"),d+=a.g+"",a.e||(d+="}");else{d+="for(i in l){";if(!a.e||a.l)d+="if(",a.e||(d+="!(u&&i=='prototype')"),!a.e&&a.l&&(d+="&&"),a.l&&(d+="h.call(l,i)"),d+="){";d+=a.g+";";if(!a.e||a.l)d+="}"}d+="}";if(a.e){d+="var f=l.constructor;";for(var e=0;7>e;e++)d+="i='"+a.j[e]+"';if(","constructor"==a.j[e]&&(d+="!(f&&f.prototype===l)&&"),d+="h.call(l,i)){"+a.g+"}"}if(a.b||a.h)d+="}";return d+=a.c+";return t",c("e,h,j,k,p,n,s","return function("+b+"){"+d+"}")(h,vb,p,z,cc,Db,xb)}function j(a){return"\\"+dc[a]}function k(a){return lc[a]}function l(a){return typeof a.toString!="function"&&typeof (a+"")=="string"}function m(){}function n(a,b,c){b||(b=0),typeof c=="undefined"&&(c=a?a.length:0);for(var d=-1,c=c-b||0,e=Array(0>c?0:c);++d<c;)e[d]=a[b+d];return e}function o(a){return mc[a]}function p(a){return yb.call(a)==Hb}function q(a){var b=!1;if(!a||typeof a!="object"||p(a))return b;var c=a.constructor;return!w(c)&&(!$b||!l(a))||c instanceof c?Ub?(jc(a,function(a,c,d){return b=!vb.call(d,c),!1}),!1===b):(jc(a,function(a,c){b=c}),!1===b||vb.call(a,b)):b}function r(a){var b=[];return kc(a,function(a,c){b.push(c)}),b}function s(a,b,c,d,e){if(null==a)return a;c&&(b=!1);if(c=x(a)){var f=yb.call(a);if(!ac[f]||$b&&l(a))return a;var g=oc(a)}if(!c||!b)return c?g?n(a):ic({},a):a;c=bc[f];switch(f){case Jb:case Kb:return new c(+a);case Lb:case Ob:return new c(a);case Nb:return c(a.source,ib.exec(a))}d||(d=[]),e||(e=[]);for(f=d.length;f--;)if(d[f]==a)return e[f];var h=g?c(a.length):{};return d.push(a),e.push(h),(g?G:kc)(a,function(a,c){h[c]=s(a,b,null,d,e)}),g&&(vb.call(a,"index")&&(h.index=a.index),vb.call(a,"input")&&(h.input=a.input)),h}function t(a){var b=[];return jc(a,function(a,c){w(a)&&b.push(c)}),b.sort()}function u(a){var b={};return kc(a,function(a,c){b[a]=c}),b}function v(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;var e=yb.call(a),f=yb.call(b);e==Hb&&(e=Mb),f==Hb&&(f=Mb);if(e!=f)return!1;switch(e){case Jb:case Kb:return+a==+b;case Lb:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Nb:case Ob:return a==b+""}f=e==Ib;if(!f){if(a.__wrapped__||b.__wrapped__)return v(a.__wrapped__||a,b.__wrapped__||b);if(e!=Mb||$b&&(l(a)||l(b)))return!1;var e=!Xb&&p(a)?Object:a.constructor,g=!Xb&&p(b)?Object:b.constructor;if(e!=g&&(!w(e)||!(e instanceof e&&w(g)&&g instanceof g)))return!1}c||(c=[]),d||(d=[]);for(e=c.length;e--;)if(c[e]==a)return d[e]==b;var h=!0,i=0;c.push(a),d.push(b);if(f){i=a.length;if(h=i==b.length)for(;i--&&(h=v(a[i],b[i],c,d)););return h}return jc(a,function(a,e,f){if(vb.call(f,e))return i++,h=vb.call(b,e)&&v(a,b[e],c,d)}),h&&jc(b,function(a,b,c){if(vb.call(c,b))return h=-1<--i}),h}function w(a){return typeof a=="function"}function x(a){return a?cc[typeof a]:!1}function y(a){return typeof a=="number"||yb.call(a)==Lb}function z(a){return typeof a=="string"||yb.call(a)==Ob}function A(a,b,c){var d=arguments,e=0,f=2,g=d[3],h=d[4];c!==ab&&(g=[],h=[],typeof c!="number"&&(f=d.length));for(;++e<f;)kc(d[e],function(b,c){var d,e,f;if(b&&((e=oc(b))||pc(b))){for(var i=g.length;i--;)if(d=g[i]==b)break;d?a[c]=h[i]:(g.push(b),h.push(f=(f=a[c],e)?oc(f)?f:[]:pc(f)?f:{}),a[c]=A(f,b,ab,g,h))}else b!=null&&(a[c]=b)});return a}function B(a){var b=[];return kc(a,function(a){b.push(a)}),b}function C(a,b,c){var d=-1,e=a?a.length:0,f=!1,c=(0>c?Eb(0,e+c):c)||0;return typeof e=="number"?f=-1<(z(a)?a.indexOf(b,c):P(a,b,c)):hc(a,function(a){if(++d>=c)return!(f=a===b)}),f}function D(a,b,c){var d=!0,b=h(b,c);if(oc(a))for(var c=-1,e=a.length;++c<e&&(d=!!b(a[c],c,a)););else hc(a,function(a,c,e){return d=!!b(a,c,e)});return d}function E(a,b,c){var d=[],b=h(b,c);if(oc(a))for(var c=-1,e=a.length;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}else hc(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function F(a,b,c){var d,b=h(b,c);return G(a,function(a,c,e){if(b(a,c,e))return d=a,!1}),d}function G(a,b,c){if(b&&typeof c=="undefined"&&oc(a))for(var c=-1,d=a.length;++c<d&&!1!==b(a[c],c,a););else hc(a,b,c);return a}function H(a,b,c){var d=-1,e=a?a.length:0,f=Array(typeof e=="number"?e:0),b=h(b,c);if(oc(a))for(;++d<e;)f[d]=b(a[d],d,a);else hc(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function I(a,b,c){var d=-Infinity,f=-1,g=a?a.length:0,i=d;if(b||!oc(a))b=!b&&z(a)?e:h(b,c),hc(a,function(a,c,e){c=b(a,c,e),c>d&&(d=c,i=a)});else for(;++f<g;)a[f]>i&&(i=a[f]);return i}function J(a,b){return H(a,b+"")}function K(a,b,c,d){var e=3>arguments.length,b=h(b,d,ab);if(oc(a)){var f=-1,g=a.length;for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a)}else hc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function L(a,b,c,d){var e=a,f=a?a.length:0,g=3>arguments.length;if(typeof f!="number")var i=qc(a),f=i.length;else Zb&&z(a)&&(e=a.split(""));return b=h(b,d,ab),G(a,function(a,d,h){d=i?i[--f]:--f,c=g?(g=!1,e[d]):b(c,e[d],d,h)}),c}function M(a,b,c){var d,b=h(b,c);if(oc(a))for(var c=-1,e=a.length;++c<e&&!(d=b(a[c],c,a)););else hc(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function N(a,b,c){if(a){var d=a.length;return null==b||c?a[0]:n(a,0,Fb(Eb(0,b),d))}}function O(a,b){for(var c=-1,d=a?a.length:0,e=[];++c<d;){var f=a[c];oc(f)?wb.apply(e,b?f:O(f)):e.push(f)}return e}function P(a,b,c){var d=-1,e=a?a.length:0;if(typeof c=="number")d=(0>c?Eb(0,e+c):c||0)-1;else if(c)return d=R(a,b),a[d]===b?d:-1;for(;++d<e;)if(a[d]===b)return d;return-1}function Q(a,b,c){return n(a,null==b||c?1:Eb(0,b))}function R(a,b,c,d){for(var e=0,f=a?a.length:e,c=c?h(c,d):U,b=c(b);e<f;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function S(a,b,c,d){var e=-1,f=a?a.length:0,g=[],i=g;typeof b=="function"&&(d=c,c=b,b=!1);var j=!b&&75<=f;if(j)var k={};c&&(i=[],c=h(c,d));for(;++e<f;){var d=a[e],l=c?c(d,e,a):d;if(j)var m=l+"",m=vb.call(k,m)?!(i=k[m]):i=k[m]=[];if(b?!e||i[i.length-1]!==l:m||0>P(i,l))(c||j)&&i.push(l),g.push(d)}return g}function T(a,b){return Rb||zb&&2<arguments.length?zb.call.apply(zb,arguments):g(a,b,n(arguments,2))}function U(a){return a}function V(a){G(t(a),function(b){var d=c[b]=a[b];c.prototype[b]=function(){var a=[this.__wrapped__];return wb.apply(a,arguments),a=d.apply(c,a),new c(a)}})}function W(){return this.__wrapped__}var X=typeof exports=="object"&&exports,Y=typeof global=="object"&&global;Y.global===Y&&(a=Y);var Z=[],$=new function(){},_=0,ab=$,bb=30,cb=a._,db=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,eb=/&(?:amp|lt|gt|quot|#x27);/g,fb=/\b__p\+='';/g,gb=/\b(__p\+=)''\+/g,hb=/(__e\(.*?\)|\b__t\))\+'';/g,ib=/\w*$/,jb=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,kb=RegExp("^"+($.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),lb=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,mb=/<%=([\s\S]+?)%>/g,nb=/($^)/,ob=/[&<>"']/g,pb=/['\n\r\t\u2028\u2029\\]/g,qb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),rb=Math.ceil,sb=Z.concat,tb=Math.floor,ub=kb.test(ub=Object.getPrototypeOf)&&ub,vb=$.hasOwnProperty,wb=Z.push,xb=$.propertyIsEnumerable,yb=$.toString,zb=kb.test(zb=n.bind)&&zb,Ab=kb.test(Ab=Array.isArray)&&Ab,Bb=a.isFinite,Cb=a.isNaN,Db=kb.test(Db=Object.keys)&&Db,Eb=Math.max,Fb=Math.min,Gb=Math.random,Hb="[object Arguments]",Ib="[object Array]",Jb="[object Boolean]",Kb="[object Date]",Lb="[object Number]",Mb="[object Object]",Nb="[object RegExp]",Ob="[object String]",Pb=!!a.attachEvent,Qb=zb&&!/\n|true/.test(zb+Pb),Rb=zb&&!Qb,Sb=Db&&(Pb||Qb),Tb,Ub,Vb=(Vb={0:1,length:1},Z.splice.call(Vb,0,1),Vb[0]),Wb=!0;(function(){function a(){this.x=1}var b=[];a.prototype={valueOf:1,y:1};for(var c in new a)b.push(c);for(c in arguments)Wb=!c;Tb=!/valueOf/.test(b),Ub="x"!=b[0]})(1);var Xb=arguments.constructor==Object,Yb=!p(arguments),Zb="xx"!="x"[0]+Object("x")[0];try{var $b=("[object Object]",yb.call(document)==Mb)}catch(_b){}var ac={"[object Function]":!1};ac[Hb]=ac[Ib]=ac[Jb]=ac[Kb]=ac[Lb]=ac[Mb]=ac[Nb]=ac[Ob]=!0;var bc={};bc[Ib]=Array,bc[Jb]=Boolean,bc[Kb]=Date,bc[Mb]=Object,bc[Lb]=Number,bc[Nb]=RegExp,bc[Ob]=String;var cc={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},dc={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:mb,variable:""};var ec={a:"o,v,g",k:"for(var a=1,b=typeof g=='number'?2:arguments.length;a<b;a++){if((l=arguments[a])){",g:"t[i]=l[i]",c:"}}"},fc={a:"d,c,w",k:"c=c&&typeof w=='undefined'?c:e(c,w)",b:"if(c(l[i],i,d)===false)return t",g:"if(c(l[i],i,d)===false)return t"},gc={b:null},hc=i(fc),ic=i(ec);Yb&&(p=function(a){return a?vb.call(a,"callee"):!1});var jc=i(fc,gc,{l:!1}),kc=i(fc,gc),lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},mc=u(lc),nc=i(ec,{g:"if(t[i]==null)"+ec.g}),oc=Ab||function(a){return Xb&&a instanceof Array||yb.call(a)==Ib};w(/x/)&&(w=function(a){return a instanceof Function||"[object Function]"==yb.call(a)});var pc=ub?function(a){if(!a||typeof a!="object")return!1;var b=a.valueOf,c=typeof b=="function"&&(c=ub(b))&&ub(c);return c?a==c||ub(a)==c&&!p(a):q(a)}:q,qc=Db?function(a){return typeof a=="function"&&xb.call(a,"prototype")?r(a):x(a)?Db(a):[]}:r;c.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}},c.assign=ic,c.bind=T,c.bindAll=function(a){for(var b=arguments,c=1<b.length?0:(b=t(a),-1),d=b.length;++c<d;){var e=b[c];a[e]=T(a[e],a)}return a},c.bindKey=function(a,b){return g(a,b,n(arguments,2))},c.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d},c.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},c.countBy=function(a,b,c){var d={},b=h(b,c);return G(a,function(a,c,e){c=b(a,c,e),vb.call(d,c)?d[c]++:d[c]=1}),d},c.debounce=function(a,b,c){function d(){h=null,c||(f=a.apply(g,e))}var e,f,g,h;return function(){var i=c&&!h;return e=arguments,g=this,clearTimeout(h),h=setTimeout(d,b),i&&(f=a.apply(g,e)),f}},c.defaults=nc,c.defer=function(a){var c=n(arguments,1);return setTimeout(function(){a.apply(b,c)},1)},c.delay=function(a,c){var d=n(arguments,2);return setTimeout(function(){a.apply(b,d)},c)},c.difference=function(a){for(var b=-1,c=a?a.length:0,e=sb.apply(Z,arguments),e=d(e,c),f=[];++b<c;){var g=a[b];e(g)||f.push(g)}return f},c.filter=E,c.flatten=O,c.forEach=G,c.forIn=jc,c.forOwn=kc,c.functions=t,c.groupBy=function(a,b,c){var d={},b=h(b,c);return G(a,function(a,c,e){c=b(a,c,e),(vb.call(d,c)?d[c]:d[c]=[]).push(a)}),d},c.initial=function(a,b,c){if(!a)return[];var d=a.length;return n(a,0,Fb(Eb(0,d-(null==b||c?1:b||0)),d))},c.intersection=function(a){var b=arguments,c=b.length,e={0:{}},f=-1,g=a?a.length:0,h=100<=g,i=[],j=i;a:for(;++f<g;){var k=a[f];if(h)var l=k+"",l=vb.call(e[0],l)?!(j=e[0][l]):j=e[0][l]=[];if(l||0>P(j,k)){h&&j.push(k);for(var m=c;--m;)if(!(e[m]||(e[m]=d(b[m],0,100)))(k))continue a;i.push(k)}}return i},c.invert=u,c.invoke=function(a,b){var c=n(arguments,2),d=typeof b=="function",e=[];return G(a,function(a){e.push((d?b:a[b]).apply(a,c))}),e},c.keys=qc,c.map=H,c.max=I,c.memoize=function(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return vb.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},c.merge=A,c.min=function(a,b,c){var d=Infinity,f=-1,g=a?a.length:0,i=d;if(b||!oc(a))b=!b&&z(a)?e:h(b,c),hc(a,function(a,c,e){c=b(a,c,e),c<d&&(d=c,i=a)});else for(;++f<g;)a[f]<i&&(i=a[f]);return i},c.object=function(a,b){for(var c=-1,d=a?a.length:0,e={};++c<d;){var f=a[c];b?e[f]=b[c]:e[f[0]]=f[1]}return e},c.omit=function(a,b,c){var d=typeof b=="function",e={};if(d)b=h(b,c);else var f=sb.apply(Z,arguments);return jc(a,function(a,c,g){if(d?!b(a,c,g):0>P(f,c,1))e[c]=a}),e},c.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},c.pairs=function(a){var b=[];return kc(a,function(a,c){b.push([c,a])}),b},c.partial=function(a){return g(a,n(arguments,1))},c.pick=function(a,b,c){var d={};if(typeof b!="function")for(var e=0,f=sb.apply(Z,arguments),g=f.length;++e<g;){var i=f[e];i in a&&(d[i]=a[i])}else b=h(b,c),jc(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d},c.pluck=J,c.range=function(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,b=Eb(0,rb((b-a)/c)),e=Array(b);++d<b;)e[d]=a,a+=c;return e},c.reject=function(a,b,c){return b=h(b,c),E(a,function(a,c,d){return!b(a,c,d)})},c.rest=Q,c.shuffle=function(a){var b=-1,c=Array(a?a.length:0);return G(a,function(a){var d=tb(Gb()*(++b+1));c[b]=c[d],c[d]=a}),c},c.sortBy=function(a,b,c){var d=[],b=h(b,c);G(a,function(a,c,e){d.push({a:b(a,c,e),b:c,c:a})}),a=d.length;for(d.sort(f);a--;)d[a]=d[a].c;return d},c.tap=function(a,b){return b(a),a},c.throttle=function(a,b){function c(){h=new Date,g=null,e=a.apply(f,d)}var d,e,f,g,h=0;return function(){var i=new Date,j=b-(i-h);return d=arguments,f=this,0>=j?(clearTimeout(g),g=null,h=i,e=a.apply(f,d)):g||(g=setTimeout(c,j)),e}},c.times=function(a,b,c){for(var a=+a||0,d=-1,e=Array(a);++d<a;)e[d]=b.call(c,d);return e},c.toArray=function(a){return typeof (a?a.length:0)=="number"?Zb&&z(a)?a.split(""):n(a):B(a)},c.union=function(){return S(sb.apply(Z,arguments))},c.uniq=S,c.values=B,c.where=function(a,b){var c=qc(b);return E(a,function(a){for(var d=c.length;d--;){var e=a[c[d]]===b[c[d]];if(!e)break}return!!e})},c.without=function(a){for(var b=-1,c=a?a.length:0,e=d(arguments,1,20),f=[];++b<c;){var g=a[b];e(g)||f.push(g)}return f},c.wrap=function(a,b){return function(){var c=[a];return wb.apply(c,arguments),b.apply(this,c)}},c.zip=function(a){for(var b=-1,c=a?I(J(arguments,"length")):0,d=Array(c);++b<c;)d[b]=J(arguments,b);return d},c.collect=H,c.drop=Q,c.each=G,c.extend=ic,c.methods=t,c.select=E,c.tail=Q,c.unique=S,V(c),c.clone=s,c.cloneDeep=function(a){return s(a,!0)},c.contains=C,c.escape=function(a){return null==a?"":(a+"").replace(ob,k)},c.every=D,c.find=F,c.has=function(a,b){return a?vb.call(a,b):!1},c.identity=U,c.indexOf=P,c.isArguments=p,c.isArray=oc,c.isBoolean=function(a){return!0===a||!1===a||yb.call(a)==Jb},c.isDate=function(a){return a instanceof Date||yb.call(a)==Kb},c.isElement=function(a){return a?1===a.nodeType:!1},c.isEmpty=function(a){var b=!0;if(!a)return b;var c=yb.call(a),d=a.length;return c==Ib||c==Ob||c==Hb||Yb&&p(a)||c==Mb&&typeof d=="number"&&w(a.splice)?!d:(kc(a,function(){return b=!1}),b)},c.isEqual=v,c.isFinite=function(a){return Bb(a)&&!Cb(parseFloat(a))},c.isFunction=w,c.isNaN=function(a){return y(a)&&a!=+a},c.isNull=function(a){return null===a},c.isNumber=y,c.isObject=x,c.isPlainObject=pc,c.isRegExp=function(a){return a instanceof RegExp||yb.call(a)==Nb},c.isString=z,c.isUndefined=function(a){return typeof a=="undefined"},c.lastIndexOf=function(a,b,c){var d=a?a.length:0;for(typeof c=="number"&&(d=(0>c?Eb(0,d+c):Fb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},c.mixin=V,c.noConflict=function(){return a._=cb,this},c.random=function(a,b){return null==a&&null==b&&(b=1),a=+a||0,null==b&&(b=a,a=0),a+tb(Gb()*((+b||0)-a+1))},c.reduce=K,c.reduceRight=L,c.result=function(a,b){var c=a?a[b]:null;return w(c)?a[b]():c},c.size=function(a){var b=a?a.length:0;return typeof b=="number"?b:qc(a).length},c.some=M,c.sortedIndex=R,c.template=function(a,b,d){a||(a=""),d||(d={});var e,f,g=c.templateSettings,h=0,i=d.interpolate||g.interpolate||nb,k="__p+='",l=d.variable||g.variable,m=l;a.replace(RegExp((d.escape||g.escape||nb).source+"|"+i.source+"|"+(i===mb?lb:nb).source+"|"+(d.evaluate||g.evaluate||nb).source+"|$","g"),function(b,c,d,f,g,i){return d||(d=f),k+=a.slice(h,i).replace(pb,j),c&&(k+="'+__e("+c+")+'"),g&&(k+="';"+g+";__p+='"),d&&(k+="'+((__t=("+d+"))==null?'':__t)+'"),e||(e=g||db.test(c||d)),h=i+b.length,b}),k+="';\n",m||(l="obj",e?k="with("+l+"){"+k+"}":(d=RegExp("(\\(\\s*)"+l+"\\."+l+"\\b","g"),k=k.replace(jb,"$&"+l+".").replace(d,"$1__d"))),k=(e?k.replace(fb,""):k).replace(gb,"$1").replace(hb,"$1;"),k="function("+l+"){"+(m?"":l+"||("+l+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(m?"":",__d="+l+"."+l+"||"+l)+";")+k+"return __p}";try{f=Function("_","return "+k)(c)}catch(n){throw n.source=k,n}return b?f(b):(f.source=k,f)},c.unescape=function(a){return null==a?"":(a+"").replace(eb,o)},c.uniqueId=function(a){return(null==a?"":a+"")+ ++_},c.all=D,c.any=M,c.detect=F,c.foldl=K,c.foldr=L,c.include=C,c.inject=K,kc(c,function(a,b){c.prototype[b]||(c.prototype[b]=function(){var b=[this.__wrapped__];return wb.apply(b,arguments),a.apply(c,b)})}),c.first=N,c.last=function(a,b,c){if(a){var d=a.length;return null==b||c?a[d-1]:n(a,Eb(0,d-b))}},c.take=N,c.head=N,kc(c,function(a,b){c.prototype[b]||(c.prototype[b]=function(b,d){var e=a(this.__wrapped__,b,d);return null==b||d?e:new c(e)})}),c.VERSION="1.0.0-rc.3",c.prototype.toString=function(){return this.__wrapped__+""},c.prototype.value=W,c.prototype.valueOf=W,hc(["join","pop","shift"],function(a){var b=Z[a];c.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}}),hc(["push","reverse","sort","unshift"],function(a){var b=Z[a];c.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),hc(["concat","slice","splice"],function(a){var b=Z[a];c.prototype[a]=function(){var a=b.apply(this.__wrapped__,arguments);return new c(a)}}),Vb&&hc(["pop","shift","splice"],function(a){var b=Z[a],d="splice"==a;c.prototype[a]=function(){var a=this.__wrapped__,e=b.apply(a,arguments);return 0===a.length&&delete a[0],d?new c(e):e}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(a._=c,define("lodash",[],function(){return c})):X?typeof module=="object"&&module&&module.exports==X?(module.exports=c)._=c:X._=c:a._=c})(this),define("util/parse",[],function(){function a(a){var b=NaN;if(a){var c=a.replace(/[^\d\.\-\ ]/g,"");b=parseFloat(c)}return b}return{parseNumber:a}}),define("model/indicatorLookup",["lodash"],function(a){var b=[],c=function(a){b=a},d=function(c){var d=a.find(b,function(a){return a.id===+c}).name;return d},e=function(c){var d=a.find(b,function(a){return a.id===+c}).label;return d},f=function(c){var d=a.find(b,function(a){return a.id===+c}).description;return d},g=function(c){var d=a.find(b,function(a){return a.name===c}).id;return+d};return{addAll:c,getNameFromId:d,getLabelFromId:e,getDescriptionFromId:f,getIdFromName:g}}),define("model/stateLookup",["lodash"],function(a){var b=[],c=function(a){b=a},d=function(c){var d=a.find(b,function(a){return+a.id===+c}).name;return d},e=function(c){var d=a.find(b,function(a){return+a.id===+c}).usps;return d},f=function(c){var d=a.find(b,function(a){return a.name===c}).id;return+d},g=function(c){var d=a.find(b,function(a){return a.usps===c}).id;return+d};return{addAll:c,getNameFromId:d,getAbbreviationFromId:e,getIdFromName:f,getIdFromAbbreviation:g}}),define("model/nationalData",["lodash","model/indicatorLookup","util/parse"],function(a,b,c){function e(e){a.each(e,function(a){for(var e in a){var f=a.Year,g=c.parseNumber(a[e]);if(e!=="Year"&&e!=="Locale"){var h=b.getIdFromName(e);d[h]||(d[h]={}),d[h][f]=g}}})}function f(a,b){return d[a][b]}var d={};return{build:e,get:f}}),define("ui/colorScales",["lodash","util/parse","model/nationalData","model/indicatorLookup"],function(a,b,c,d){function f(b){var d=d3.range(9).map(function(a){return"q"+a});a.each(b,function(b){var f=b.id;a.each(b.values,function(a){var b=a.year,g=d3.min(a.locales,function(a){return a.value}),h=d3.max(a.locales,function(a){return a.value}),i=c.get(f,b),j=[g,i,h],k=d3.scale.quantile().range(d).domain(j);e[f]||(e[f]={}),e[f][b]=k})})}var e={},g=function(a,b){return e[a][b]};return{get:g,build:f}}),define("model/dataBuilder",["lodash","util/parse","model/indicatorLookup","model/stateLookup","model/nationalData","ui/colorScales"],function(a,b,c,d,e,f){function i(i){var j=a.keys(i[0]),k=a.find(j,function(b){return a.contains(g,b)}),l=a.find(j,function(b){return a.contains(h,b)}),m=[],n=[],o={},p={},q={},r=[];for(var s=0;s<i.length;s++){var t=i[s],u=t[k],v=t[l];if(v==="National")r.push(t);else{var w=d.getIdFromAbbreviation(v),x=d.getNameFromId(w);for(var y in t)if(y!==k&&y!==l){var z=c.getIdFromName(y),A=b.parseNumber(t[y]);if(!a.contains(n,y)){var B={id:z,values:[{year:u,indicatorId:z,locales:[{id:w,name:x,value:A}]}]},C=m.push(B);o[y]=C-1,n.push(y),p[y]=[u],q[y]={},q[y][u]=0}else if(!a.contains(p[y],u)){var D=m[o[y]].values.push({year:u,indicatorId:z,locales:[{id:w,name:x,value:A}]});p[y].push(u),q[y][u]=D-1}else{var E=m[o[y]].values,F=E[q[y][u]];F.locales.push({id:w,name:x,value:A})}}}}return e.build(r),f.build(m),m}var g=["Year","year","Yr","yr"],h=["Locale","locale","State","state","HRR","hrr"];return{build:i}}),define("ui/app",["lodash","model/dataBuilder","model/indicatorLookup","model/stateLookup","ui/colorScales"],function(a,b,c,d,e){function m(){queue().defer(d3.csv,"data/states-2007-2010-trimmed.csv").defer(d3.json,"data/lookup/state-codes.json").defer(d3.json,"data/lookup/indicator-names.json").defer(d3.json,"data/maps/us-very-small.json").await(n)}function n(a,e,f,g,k){d.addAll(f),c.addAll(g);var l=b.build(e);h=topojson.object(k,k.objects.states).geometries,i=topojson.mesh(k,k.objects.states,function(a,b){return a.id!==b.id}),$("#loading-message").html("Building visualiations...");var m=d3.select("#previews").selectAll(".row").data(l).enter().append("div").attr("class","row");m.each(o),$(".rowLabel").tipsy({gravity:"s",fade:!0,delayIn:500}),$(".mapLocale").tipsy({gravity:$.fn.tipsy.autoNS,html:!0}),$("#loading-container").css("visibility","hidden"),$("#main").css("visibility","visible"),console.log("Total load time: "+(Date.now()-j)/1e3+" seconds.")}function o(a,b){var d=d3.select(this),e=c.getLabelFromId(+a.id),h=e.length>90?e.substr(0,90)+" ...":e;d.append("div").attr("class","rowLabel").attr("title",c.getDescriptionFromId(a.id)).html(h);var i=d.selectAll(".preview").data(a.values).enter().append("div").attr("class",function(a){return"indicator-"+ +a.id+" preview"}).style("width",f).style("height",g),j=i.append("svg").attr("width",f).attr("height",g),k=j.append("g");k.each(p)}function p(b,j){var k={};a.each(b.locales,function(a){k[+a.id]=+a.value});var m=d3.format(","),n=e.get(b.indicatorId,b.year),o=d3.select(this);o.append("rect").attr("width",f).attr("height",g).attr("class","mapBg");var p=o.append("g");p.append("text").text(function(a){return b.year}).attr("class","mapTitle").attr("text-anchor","middle").attr("x",f/2).attr("dy","1.3em"),p.selectAll("path").data(h).enter().append("path").attr("d",l).attr("data-indicator-label",c.getLabelFromId(b.indicatorId)).attr("data-indicator-id",b.indicatorId).attr("data-year",b.year).attr("data-locale-name",function(a){return d.getNameFromId(+a.id)}).attr("data-locale-value",function(c){return a.find(b.locales,function(a){return c.id===a.id}).value}).attr("class",function(a){var c=n(k[+a.id]);return"mapLocale indicator-"+b.indicatorId+"-locale-"+ +a.id+" "+(typeof c!==undefined?c:"")}).attr("title",function(a){var b=d3.select(this),c=b.attr("data-locale-name"),d=m(b.attr("data-locale-value")),e=b.attr("data-indicator-label"),f=n.domain();return isNaN(d)&&(d="Not Available"),"<small>"+e+"</small>"+"<br />"+"<big><strong>"+c+" &raquo; "+d+"</strong></big>"+"<br />"+"<small>min: </small>"+f[0]+"<small> / avg: </small>"+f[1]+"<small> / max: </small>"+f[2]}).on("mouseover",function(a){var b=d3.select(this).attr("data-indicator-id");q("over",b,+a.id)}).on("mouseout",function(a){var b=d3.select(this).attr("data-indicator-id");q("out",b,+a.id)}),p.append("path").datum(i).attr("d",l).attr("class","mapLocaleBoundary")}function q(a,b,c){d3.selectAll(".indicator-"+b+"-locale-"+c).style("fill",a==="over"?"#b0d912":null)}var f=190,g=120,h,i,j=Date.now(),k=d3.geo.albersUsa().scale(f+20).translate([(f+20)/2,g/2+10]),l=d3.geo.path().projection(k);return{init:m}}),require.config({shim:{},paths:{lodash:"vendor/lodash.min",hm:"vendor/hm",esprima:"vendor/esprima",ui:"ui",model:"model",util:"util"}}),require(["ui/app"],function(a){a.init()}),define("main",function(){})}();